<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>The Iron Reserve ‚Äì Guild Inventory</title>

<style>
  :root{
    --bg-dark:#1c1c1c;
    --bg-card:#2a2a2a;
    --bg-rented:#2c1c34;
    --border-rented:#6f3f8c;
    --text:#f5f5f5;
    --accent:#ffc107;
    --border-dark:#333;
    --radius:10px;

    /* type colours */
    --t-Consumable:#2f855a;   /* green */
    --t-Alchemical:#2b6cb0;   /* blue */
    --t-Scroll:#805ad5;       /* purple */
    --t-Formula:#b7791f;      /* amber */
    --t-Rune:#d53f8c;         /* pink */
    --t-Weapon:#c53030;       /* red */
    --t-Armour:#3182ce;       /* cyan/blue */
    --t-Shield:#4299e1;       /* light blue */
    --t-Wondrous:#b83280;     /* magenta */
    --t-Trinket:#718096;      /* gray */
    --t-Attachment:#6b46c1;   /* indigo */
    --t-Default:#555;         /* fallback */
  }

  *{box-sizing:border-box;margin:0;padding:0;}
  body{
    font-family:'Segoe UI',Tahoma,Verdana,sans-serif;
    background:var(--bg-dark);color:var(--text);padding:20px;
  }

  /* header/nav */
  .site-header{
    display:flex;align-items:center;gap:.75rem;
    background:#1f1f1f;border-bottom:2px solid #444;
    margin:-20px -20px 1.5rem;padding:.75rem 1rem;position:relative;
  }
  .logo{font-weight:700;color:var(--accent);font-size:1.1rem;}
  .nav-toggle{display:none;}
  .hamburger{font-size:1.4rem;color:#fff;cursor:pointer;margin-left:auto;user-select:none;display:block;}
  .site-nav{display:none;flex-direction:column;gap:.75rem;position:absolute;left:0;right:0;top:100%;
    background:#1f1f1f;border-top:2px solid #444;padding:1rem;}
  .site-nav a{color:#fff;text-decoration:none;font-weight:600;}
  .site-nav a:hover{color:var(--accent);}
  .nav-toggle:checked + .hamburger + .site-nav{display:flex;}
  @media(min-width:620px){
    body{padding:24px;}
    .site-header{margin:-24px -24px 1.75rem;padding:1rem 1.25rem;}
    .hamburger{display:none;}
    .site-nav{display:flex !important;position:static;flex-direction:row;gap:1.25rem;margin-left:auto;background:transparent;border:none;padding:0;}
  }

  /* heading */
  h1{text-align:center;color:var(--accent);font-size:clamp(1.5rem,5vw,2.2rem);margin-bottom:1rem;}
  p{line-height:1.6;margin-bottom:1.25rem;text-align:center;}

  /* filters */
  .filter-bar{display:flex;flex-wrap:wrap;gap:.75rem;justify-content:center;margin-bottom:1.5rem;}
  .filter-bar input,.filter-bar select{
    background:var(--bg-card);color:var(--text);border:1px solid var(--border-dark);
    padding:.5rem .75rem;border-radius:var(--radius);min-width:140px;
  }
  .filter-bar input::placeholder{color:#aaa;}

  /* grid */
  .item-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;}

  /* card */
  .item{
    background:var(--bg-card);border:1px solid var(--border-dark);
    border-radius:var(--radius);padding:1rem;display:flex;flex-direction:column;gap:.6rem;
    transition:transform .2s, box-shadow .2s;
  }
  .item:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,.25);}
  .item.rented{background:var(--bg-rented);border-color:var(--border-rented);}
  .item.vault{box-shadow:0 0 0 2px #ffd166 inset, 0 0 24px rgba(255,209,102,.25);}
  .item-header{display:flex;align-items:center;gap:.5rem;}
  .item-icon{font-size:1.1rem;}
  .item-name{font-weight:700;color:var(--accent);font-size:1.05rem;flex:1;}
  .tag-row{display:flex;flex-wrap:wrap;gap:.5rem;font-size:.78rem;}
  .tag{
    background:#444;padding:.18rem .6rem;border-radius:9999px;white-space:nowrap;border:1px solid rgba(255,255,255,.06);
  }
  .tag.type{font-weight:700;}
  .qty{font-weight:700;}
  .price{font-weight:700;}
  .vault-pill{background:#4a2; color:#111; font-weight:800; letter-spacing:.3px;}

  .details{display:none;flex-direction:column;gap:.45rem;font-size:.92rem;}
  .item.open .details{display:flex;}
  .toggle-btn{
    align-self:flex-start;padding:.25rem .65rem;font-size:.78rem;font-weight:700;
    border:1px solid var(--border-dark);border-radius:var(--radius);
    background:var(--accent);color:#111;cursor:pointer;user-select:none;transition:filter .2s;
  }
  .toggle-btn:hover{filter:brightness(1.06);}

  /* legend */
  .legend{max-width:980px;margin:0 auto 1rem;display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;opacity:.9}
  .legend .tag{opacity:.9}
  @media(max-width:480px){.item-container{grid-template-columns:1fr;}}
</style>
</head>

<body>
<header class="site-header">
  <div class="logo">Iron Meridian</div>
  <input type="checkbox" id="nav-toggle" class="nav-toggle">
  <label for="nav-toggle" class="hamburger">&#9776;</label>
  <nav class="site-nav">
    <a href="Mercenary Guild Overview.html">üè∞ Overview</a>
    <a href="Mission Board.html">üìú Mission Board</a>
    <a href="Mission Reports.html">üìù Reports</a>
    <a href="The Armoury.html">üõ°Ô∏è The Armoury</a>
    <a href="iron-meridian-downtime.html">‚è≥ Downtime</a>
    <a href="The Iron Reserve.html">üè∫ Reserve</a>
  </nav>
</header>

<h1>üè∫ The Iron Reserve</h1>
<p>Browse guild-owned gear available for purchase or rental. Rented items are highlighted. Vault items are rare, expensive, and mildly judgmental.</p>

<!-- quick legend -->
<div class="legend" id="legend"></div>

<!-- filters -->
<div class="filter-bar">
  <input type="text" id="searchInput" placeholder="Search items‚Ä¶">
  <select id="typeFilter"><option value="">All Types</option></select>
  <select id="sortSelect">
    <option value="name">Sort: Name</option>
    <option value="price">Sort: Price</option>
    <option value="quantity">Sort: Quantity</option>
    <option value="type">Sort: Type</option>
  </select>
</div>

<div id="itemContainer" class="item-container"></div>

<script>
/* ---------- unified data (updated) ---------- */
const items = [
  /* --- Core consumables (restocked & curated) --- */
  {
    "name": "Smokestick (Lesser)",
    "type": "Alchemical",
    "description": "Creates a 10-ft square of smoke for cover for 1 minute.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 8
  },
  {
    "name": "Alchemist's Fire (Lesser)",
    "type": "Alchemical",
    "description": "Bomb that sets things ablaze.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 10
  },
  {
    "name": "Tanglefoot Bag (Lesser)",
    "type": "Alchemical",
    "description": "Glue enemies to the floor.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 8
  },
  {
    "name": "Bottled Lightning (Lesser)",
    "type": "Alchemical",
    "description": "On hit: electricity splash; target becomes flat-footed until end of your next turn.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Frost Vial (Lesser)",
    "type": "Alchemical",
    "description": "On hit: cold damage and ‚Äì10 ft Speed for 1 round.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Potion of Spider Climb (Lesser)",
    "type": "Consumable",
    "description": "Climb on walls/ceilings for 1 minute.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 3
  },
  {
    "name": "Potion of Healing (Minor)",
    "type": "Consumable",
    "description": "Restores 1d8 HP.",
    "price": "4 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 10
  },
  {
    "name": "Potion of Healing (Lesser)",
    "type": "Consumable",
    "description": "Restores 2d8+5 HP.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 0
  },
  {
    "name": "Potion of Antidote (Lesser)",
    "type": "Consumable",
    "description": "+2 item bonus vs poison for 6 h.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Antiplague (Lesser)",
    "type": "Consumable",
    "description": "+2 item bonus to Fortitude saves vs disease for 24 hours.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Elixir of Life (Minor)",
    "type": "Consumable",
    "description": "Restores 1d6 HP; +1 to saves vs disease/poison for 10 min.",
    "price": "3 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 0
  },
  {
    "name": "Feather Token (Tree)",
    "type": "Consumable",
    "description": "Instant sturdy tree; great cover or battlefield control.",
    "price": "30 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 1
  },

  /* --- Scroll rack (1st‚Äì5th level) --- */
  {
    "name": "Scroll of Magic Missile (1st)",
    "type": "Scroll",
    "description": "Force darts that auto-hit.",
    "price": "4 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Scroll of Heal (1st)",
    "type": "Scroll",
    "description": "Burst/2-action/1-action healing options.",
    "price": "4 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 6
  },
  {
    "name": "Scroll of Fear (1st)",
    "type": "Scroll",
    "description": "Frighten foes; Will save.",
    "price": "4 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 4
  },
  {
    "name": "Scroll of Invisibility (2nd)",
    "type": "Scroll",
    "description": "Turn a creature invisible for a short time.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 3
  },
  {
    "name": "Scroll of Knock (2nd)",
    "type": "Scroll",
    "description": "Open locks and stuck doors.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 3
  },
  {
    "name": "Scroll of Mirror Image (2nd)",
    "type": "Scroll",
    "description": "Illusory duplicates for defense.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 3
  },
  {
    "name": "Scroll of Restoration (2nd)",
    "type": "Scroll",
    "description": "Reduce clumsy/enfeebled/stupefied 1; remove minor conditions.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Scroll of Fireball (3rd)",
    "type": "Scroll",
    "description": "A fiery explosion dealing 6d6 fire damage in 20-ft burst.",
    "price": "12 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Scroll of Haste (3rd)",
    "type": "Scroll",
    "description": "Grants extra actions to a creature.",
    "price": "14 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Scroll of Dimension Door (4th)",
    "type": "Scroll",
    "description": "Instantly transport yourself and up to 1 ally.",
    "price": "30 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Scroll of Wall of Stone (5th)",
    "type": "Scroll",
    "description": "Conjure a solid wall of stone.",
    "price": "75 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Scroll of Teleport (5th)",
    "type": "Scroll",
    "description": "Transport yourself and allies across great distances.",
    "price": "90 gp",
    "consumable": true,
    "rented": "No",
    "quantity": 1
  },

  /* --- Fun/affordable items --- */
  {
    "name": "Whistle of Echoing Steps",
    "type": "Trinket",
    "description": "Once/day, create illusory departing footsteps (DC 14 Will disbelief).",
    "price": "20 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Amberglow Pauldrons",
    "type": "Armour",
    "description": "+1 item bonus vs fire; 1/day absorb 5 fire dmg as a reaction.",
    "price": "75 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Bracers of Armor +1",
    "type": "Armour",
    "description": "For light/robed adventurers needing a little AC.",
    "price": "160 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Boots of Bounding",
    "type": "Wondrous",
    "description": "+5 ft status Speed; +1 item bonus to Athletics (high/long jumps).",
    "price": "110 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Flametongue Dagger",
    "type": "Weapon",
    "description": "+1 dagger; ignite 1 minute/day for +1d4 fire.",
    "price": "200 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },

  /* --- Crafting formulas --- */
  {
    "name": "Formula: Alchemist‚Äôs Fire (Lesser)",
    "type": "Formula",
    "description": "Crafting formula for Lesser Alchemist‚Äôs Fire.",
    "price": "1 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Formula: Tanglefoot Bag (Lesser)",
    "type": "Formula",
    "description": "Crafting formula for Lesser Tanglefoot Bag.",
    "price": "1 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Formula: Bottled Lightning (Lesser)",
    "type": "Formula",
    "description": "Crafting formula for Lesser Bottled Lightning.",
    "price": "1 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Formula: Frost Vial (Lesser)",
    "type": "Formula",
    "description": "Crafting formula for Lesser Frost Vial.",
    "price": "1 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Formula: Oil of Magic Weapon (2nd-level spell)",
    "type": "Formula",
    "description": "Oil that imbues a weapon with a brief +1 striking effect.",
    "price": "2 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 0
  },

  /* --- Fundamental & property runes --- */
  {
    "name": "Weapon Potency Rune (+1)",
    "type": "Rune",
    "description": "+1 item bonus to attack rolls.",
    "price": "35 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Striking Rune",
    "type": "Rune",
    "description": "Increase weapon damage dice to 2.",
    "price": "65 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Armor Potency Rune (+1)",
    "type": "Rune",
    "description": "+1 item bonus to AC.",
    "price": "160 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 2
  },
  {
    "name": "Ghost Touch Rune",
    "type": "Rune",
    "description": "Weapon strikes affect incorporeal creatures normally.",
    "price": "75 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Returning Rune",
    "type": "Rune",
    "description": "Thrown weapon returns to your hand.",
    "price": "55 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },

  /* --- High-tier Vault Stock --- */
  {
    "name": "Blade of Shattered Stars",
    "type": "Weapon",
    "description": "+2 greater striking longsword; on crit deals 2d6 force in a 10-ft burst.",
    "price": "5000 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Crown of Whispered Truths",
    "type": "Wondrous",
    "description": "Once/day ask a single question and receive a cryptic true answer (divination).",
    "price": "3500 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Mantle of the Phoenix",
    "type": "Armour",
    "description": "+2 resilient armor; once/week resurrects wearer at half HP on death with 20-ft fire burst (6d6, DC 25).",
    "price": "8000 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Ring of Planar Steps",
    "type": "Wondrous",
    "description": "3/day cast Dimension Door; 1/month shift to Ethereal Plane for 1 min.",
    "price": "6500 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Staff of the Void Spiral",
    "type": "Wondrous",
    "description": "Legendary staff; grants heightened fear, confusion, phantasmal killer. Recharge via soul gems.",
    "price": "10000 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Gloves of Warpsteel",
    "type": "Wondrous",
    "description": "1/day reaction: redirect a melee attack to another creature within reach.",
    "price": "1800 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Stormcall Javelin",
    "type": "Weapon",
    "description": "Thrown weapon; on hit calls lightning (4d12, 20-ft burst, DC 23 Reflex). Reforms after 1 min.",
    "price": "1200 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Mask of Many Faces",
    "type": "Wondrous",
    "description": "At will: Disguise Self (heightened 3rd); 1/day: Alter Self.",
    "price": "1000 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  },
  {
    "name": "Cloak of the Dreaming Tide",
    "type": "Wondrous",
    "description": "Water breathing; +2 saves vs sleep/charm; 1/day cast Sleep heightened to 4th.",
    "price": "2200 gp",
    "consumable": false,
    "rented": "No",
    "quantity": 1
  }
];


/* ---------- config: icons & colours by type ---------- */
const TYPE_META = {
  "Consumable": { icon:"üß™", color:"var(--t-Consumable)" },
  "Alchemical": { icon:"‚öóÔ∏è", color:"var(--t-Alchemical)" },
  "Scroll":     { icon:"üìú", color:"var(--t-Scroll)" },
  "Formula":    { icon:"üìò", color:"var(--t-Formula)" },
  "Rune":       { icon:"üî∂", color:"var(--t-Rune)" },
  "Weapon":     { icon:"‚öîÔ∏è", color:"var(--t-Weapon)" },
  "Armour":     { icon:"üõ°Ô∏è", color:"var(--t-Armour)" },
  "Shield":     { icon:"üõ°Ô∏è", color:"var(--t-Shield)" },
  "Wondrous":   { icon:"‚ú®", color:"var(--t-Wondrous)" },
  "Trinket":    { icon:"üé¥", color:"var(--t-Trinket)" },
  "Attachment": { icon:"üß∑", color:"var(--t-Attachment)" }
};
const DEFAULT_META = { icon:"üì¶", color:"var(--t-Default)" };

/* vault threshold (gp) */
const VAULT_THRESHOLD = 1000;

/* ---------- helpers ---------- */
function goldValue(str){
  const m=/([0-9]+)\s*gp/i.exec(str||"");
  return m?+m[1]:0;
}
function rentPrice(item){
  if(item.consumable) return '‚Äî';
  return Math.ceil(goldValue(item.price)*0.2)+' gp';
}
const rented = it => it.rented && it.rented!=='No';

/* populate type filter + legend */
const typeSel=document.getElementById('typeFilter');
const types=[...new Set(items.map(i=>i.type))].sort();
types.forEach(t=>{
  const o=document.createElement('option');o.value=t;o.textContent=t;typeSel.appendChild(o);
});
const legend=document.getElementById('legend');
[...types].forEach(t=>{
  const meta = TYPE_META[t]||DEFAULT_META;
  const pill=document.createElement('span');
  pill.className='tag';
  pill.style.background=meta.color;
  pill.textContent=`${meta.icon} ${t}`;
  legend.appendChild(pill);
});

/* render list */
['searchInput','typeFilter','sortSelect'].forEach(id=>document.getElementById(id).addEventListener('input',render));
render();

function render(){
  const q=(document.getElementById('searchInput').value||"").toLowerCase();
  const type=typeSel.value;
  const sort=document.getElementById('sortSelect').value;

  const list=items.filter(i=>{
    const match = (i.name||"").toLowerCase().includes(q) || (i.description||"").toLowerCase().includes(q);
    const typeOk = !type || i.type===type;
    return match && typeOk;
  }).sort((a,b)=>{
    if(sort==='price')    return goldValue(a.price)-goldValue(b.price);
    if(sort==='quantity') return (b.quantity||0)-(a.quantity||0);
    if(sort==='type')     return (a.type||'').localeCompare(b.type||'');
    return (a.name||'').localeCompare(b.name||'');
  });

  const cont=document.getElementById('itemContainer');
  cont.innerHTML='';
  list.forEach(i=>{
    const meta = TYPE_META[i.type]||DEFAULT_META;
    const isVault = goldValue(i.price) >= VAULT_THRESHOLD;

    const card=document.createElement('div');
    card.className='item'+(rented(i)?' rented':'')+(isVault?' vault':'');

    card.innerHTML=`
      <div class="item-header">
        <div class="item-icon" title="${i.type}">${meta.icon}</div>
        <div class="item-name">${i.name}</div>
      </div>

      <div class="tag-row">
        <span class="tag type" style="background:${meta.color}">${i.type}</span>
        <span class="tag price">Buy: ${i.price}</span>
        <span class="tag">Rent: ${rentPrice(i)}</span>
        <span class="tag qty">Qty: ${i.quantity??'‚Äî'}</span>
        ${isVault ? `<span class="tag vault-pill">üèõÔ∏è Vault</span>` : ``}
        ${rented(i) ? `<span class="tag">Rented</span>` : ``}
      </div>

      <button class="toggle-btn">Details</button>
      <div class="details">
        <p>${i.description||''}</p>
        <p><strong>Currently Rented:</strong> ${i.rented||'No'}</p>
      </div>
    `;

    card.querySelector('.toggle-btn').addEventListener('click',e=>{
      card.classList.toggle('open');
      e.target.textContent=card.classList.contains('open')?'Hide':'Details';
    });
    cont.appendChild(card);
  });
}
</script>
</body>
</html>
