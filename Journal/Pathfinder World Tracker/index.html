<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iron Meridian Campaign Tracker</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="dist/css/main.min.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Navigation -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse" style="background-color: var(--bg-dark);">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active text-accent" href="#dashboard">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#quests">
                                <i class="fas fa-scroll me-2"></i>Quests
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#players">
                                <i class="fas fa-users me-2"></i>Players
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#characters">
                                <i class="fas fa-user-shield me-2"></i>Characters
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#loot">
                                <i class="fas fa-coins me-2"></i>Loot & Curses
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#locations">
                                <i class="fas fa-map-marked-alt me-2"></i>Locations
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#notes">
                                <i class="fas fa-book me-2"></i>Backstories & Notes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#guild">
                                <i class="fas fa-shield-alt me-2"></i>Guild Logs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text" href="#factions">
                                <i class="fas fa-flag me-2"></i>Factions
                            </a>
                        </li>
                        <li class="nav-item mt-4">
                            <a class="nav-link text" href="data-management.html">
                                <i class="fas fa-database me-2"></i>Data Management
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content Area -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div id="content" class="content-area">
                    <!-- Quests Section -->
                    <div id="quests" class="section">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2 class="text-accent">Quest Log</h2>
                            <button id="addQuestBtn" class="btn btn-primary">
                                <i class="fas fa-plus me-1"></i> Add Quest
                            </button>
                        </div>
                        
                        <div class="row">
                            <!-- Quest List -->
                            <div class="col-md-4">
                                <div class="card shadow-sm mb-3">
                                    <div class="card-header bg-card-header">
                                        <div class="input-group">
                                            <span class="input-group-text bg-dark border-secondary text-muted">
                                                <i class="fas fa-search"></i>
                                            </span>
                                            <input type="text" id="questSearch" class="form-control bg-dark border-secondary text-light" placeholder="Search quests...">
                                        </div>
                                    </div>
                                    <div class="list-group list-group-flush quest-list" id="questList">
                                        <!-- Quests will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Quest Details -->
                            <div class="col-md-8">
                                <div class="card shadow-sm h-100">
                                    <div class="card-header bg-card-header d-flex justify-content-between align-items-center">
                                        <h3 class="h5 mb-0">Quest Details</h3>
                                        <div class="btn-group">
                                            <button id="editQuestBtn" class="btn btn-sm btn-outline-secondary">
                                                <i class="fas fa-edit"></i> Edit
                                            </button>
                                            <button id="deleteQuestBtn" class="btn btn-sm btn-outline-danger">
                                                <i class="fas fa-trash"></i> Delete
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body" id="questDetails">
                                        <div class="text-center text-muted py-5">
                                            <i class="fas fa-scroll fa-3x mb-3"></i>
                                            <p>Select a quest to view details</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dashboard Section -->
                    <div id="dashboard" class="section">
                        <h1 class="text-accent">Welcome to Iron Meridian Campaign Tracker</h1>
                        <p class="text">Select a section from the sidebar to begin managing your campaign.</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-4">
                                <div class="card shadow-accent">
                                    <div class="card-body bg-card">
                                        <h5 class="card-title text-accent"><i class="fas fa-scroll me-2"></i>Active Quests</h5>
                                        <p class="card-text text" id="activeQuestsCount">Loading...</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-accent">
                                    <div class="card-body bg-card">
                                        <h5 class="card-title text-accent"><i class="fas fa-users me-2"></i>Party Members</h5>
                                        <p class="card-text text" id="partyMembersCount">Loading...</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-accent">
                                    <div class="card-body bg-card">
                                        <h5 class="card-title text-accent"><i class="fas fa-map-marked-alt me-2"></i>Locations Discovered</h5>
                                        <p class="card-text text" id="locationsCount">Loading...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quests Section -->
                    <div id="quests" class="section">
                        <div class="row">
                            <!-- Quest List -->
                            <div class="col-md-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h2 class="text-accent">Quests</h2>
                                    <button id="addQuestBtn" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Add Quest
                                    </button>
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" id="questSearch" class="form-control" placeholder="Search quests...">
                                </div>
                                <div id="questList" class="list-group" style="max-height: 600px; overflow-y: auto;">
                                    <!-- Quests will be loaded here -->
                                </div>
                            </div>
                            <!-- Quest Details -->
                            <div class="col-md-8">
                                <div id="questDetails" class="card h-100">
                                    <div class="empty-state">
                                        <i class="fas fa-scroll fa-3x mb-3"></i>
                                        <p class="empty-state-message">Select a quest to view details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Players Section -->
                    <div id="players" class="section">
                        <div class="row">
                            <!-- Player List -->
                            <div class="col-md-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h2 class="text-accent">Players</h2>
                                    <button id="addPlayerBtn" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Add Player
                                    </button>
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" id="playerSearch" class="form-control" placeholder="Search players...">
                                </div>
                                <div id="playerList" class="list-group" style="max-height: 600px; overflow-y: auto;">
                                    <!-- Players will be loaded here -->
                                </div>
                            </div>
                            <!-- Player Details -->
                            <div class="col-md-8">
                                <div id="playerDetails" class="card h-100">
                                    <div class="empty-state">
                                        <i class="fas fa-user-friends fa-3x mb-3"></i>
                                        <p class="empty-state-message">Select a player to view details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loot Section -->
                    <div id="loot" class="section">
                        <div class="loot-container">
                            <!-- Loot Filters -->
                            <div class="loot-filters">
                                <div class="loot-filters__search">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                                        <input type="text" id="lootItemSearch" class="form-control" placeholder="Search items..." data-search-type="loot">
                                    </div>
                                </div>
                                <div class="loot-filters__controls">
                                    <button id="addItemBtn" class="btn btn-primary">
                                        <i class="fas fa-plus me-2"></i>Add Item
                                    </button>
                                </div>
                            </div>

                            <div class="loot-content">
                                <!-- Item List -->
                                <div class="loot-list-container">
                                    <h2 class="section-title">Loot & Curses</h2>
                                    <div id="itemList" class="loot-list">
                                        <!-- Items will be loaded here -->
                                        <div class="loot-empty">
                                            <div class="loot-empty__icon">
                                                <i class="fas fa-coins"></i>
                                            </div>
                                            <p class="loot-empty__message">No items found</p>
                                            <button id="addFirstItemBtn" class="btn btn-primary">
                                                <i class="fas fa-plus me-2"></i>Add Your First Item
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Item Details -->
                                <div class="loot-details-container">
                                    <div id="itemDetails" class="loot-details">
                                        <div class="loot-empty">
                                            <i class="fas fa-coins fa-3x mb-3"></i>
                                            <p class="loot-empty__message">Select an item to view details</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>

                    <!-- Locations Section -->
                    <div id="locations" class="section">
                        <div class="row mb-3">
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h2 class="text-accent">World Map</h2>
                                    <div>
                                        <button id="addLocationBtn" class="btn btn-primary">
                                            <i class="fas fa-plus"></i> Add Location
                                        </button>
                                    </div>
                                </div>
                                <div id="worldMapContainer" style="width: 100%; height: 600px; border: 1px solid #ddd; border-radius: 4px; position: relative; overflow: hidden; background-color: #f8f9fa;">
                                    <div id="mapLoadingOverlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; color: white; z-index: 10;">
                                        <div class="text-center">
                                            <div class="spinner-border" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            <p class="mt-2">Loading map...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <!-- Location List -->
                            <div class="col-md-4">
                                <div class="input-group mb-3">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" id="locationSearch" class="form-control" placeholder="Search locations...">
                                </div>
                                <div id="locationList" class="list-group" style="max-height: 400px; overflow-y: auto;">
                                    <!-- Locations will be loaded here -->
                                </div>
                            </div>
                            <!-- Location Details -->
                            <div class="col-md-8">
                                <div id="locationDetails" class="card h-100">
                                    <div class="empty-state">
                                        <i class="fas fa-map-marker-alt fa-3x mb-3"></i>
                                        <p class="empty-state-message">Select a location to view details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Section -->
                    <div id="notes" class="section">
                        <div class="row">
                            <!-- Notes List -->
                            <div class="col-md-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h2 class="text-accent">Backstories & Notes</h2>
                                    <button id="addNoteBtn" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Add Note
                                    </button>
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" id="noteSearch" class="form-control" placeholder="Search notes...">
                                </div>
                                <div id="noteList" class="list-group" style="max-height: 600px; overflow-y: auto;">
                                    <!-- Notes will be loaded here -->
                                </div>
                            </div>
                            <!-- Note Details -->
                            <div class="col-md-8">
                                <div id="noteDetails" class="card h-100">
                                    <div class="empty-state">
                                        <i class="fas fa-book fa-3x mb-3"></i>
                                        <p class="empty-state-message">Select a note to view details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Guild Section -->
                    <div id="guild" class="section">
                        <h2 class="text-accent">Guild Logs</h2>
                        
                        <!-- Activity Log Section -->
                        <div class="card mb-4">
                            <div class="card-header bg-card-header">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h3 class="h5 mb-0">Guild Activities</h3>
                                    <button class="btn btn-primary btn-sm new-activity-btn">
                                        <i class="fas fa-plus me-1"></i> New Activity
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="input-group">
                                        <input type="text" class="form-control activity-search-input" placeholder="Search activities...">
                                        <button class="btn btn-outline-secondary activity-search-btn" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <div class="btn-group mt-2" role="group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary activity-filter" data-type="all">All</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary activity-filter" data-type="quest">Quests</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary activity-filter" data-type="event">Events</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary activity-filter" data-type="meeting">Meetings</button>
                                    </div>
                                </div>
                                <div class="activity-list">
                                    <!-- Activities will be loaded here -->
                                    <div class="text-center py-4">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-2 text-muted">Loading activities...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Resources Section -->
                        <div class="card">
                            <div class="card-header bg-card-header">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h3 class="h5 mb-0">Guild Resources</h3>
                                    <button class="btn btn-primary btn-sm new-resource-btn">
                                        <i class="fas fa-plus me-1"></i> New Resource
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="input-group">
                                        <input type="text" class="form-control resource-search-input" placeholder="Search resources...">
                                        <button class="btn btn-outline-secondary resource-search-btn" type="button">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <div class="btn-group mt-2" role="group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary resource-filter" data-type="all">All</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary resource-filter" data-type="gold">Gold</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary resource-filter" data-type="item">Items</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary resource-filter" data-type="information">Information</button>
                                    </div>
                                </div>
                                <div class="resource-list">
                                    <!-- Resources will be loaded here -->
                                    <div class="text-center py-4">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-2 text-muted">Loading resources...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Activity Form Modal -->
                        <div class="modal fade" id="activityFormModal" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">New Activity</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Activity form will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Resource Form Modal -->
                        <div class="modal fade" id="resourceFormModal" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">New Resource</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- Resource form will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Factions Section -->
                    <div id="factions" class="section">
                        <div class="row">
                            <div class="col-12">
                                <div id="factions-container">
                                    <!-- Factions content will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Characters Section -->
                    <div id="characters" class="section">
                        <div class="row">
                            <!-- Character List -->
                            <div class="col-md-4">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h2 class="text-accent">Characters</h2>
                                    <button id="addCharacterBtn" class="btn btn-primary">
                                        <i class="fas fa-plus"></i> Add Character
                                    </button>
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" id="characterSearch" class="form-control" placeholder="Search characters...">
                                </div>
                                <div id="characterList" class="list-group" style="max-height: 600px; overflow-y: auto;">
                                    <!-- Characters will be loaded here -->
                                </div>
                            </div>
                            
                            <!-- Character Details -->
                            <div class="col-md-8">
                                <div id="characterDetails" class="card h-100">
                                    <div class="empty-state">
                                        <i class="fas fa-user-shield fa-3x mb-3"></i>
                                        <p class="empty-state-message">Select a character to view details</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Tom Select for enhanced dropdowns -->
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/js/tom-select.complete.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/css/tom-select.css" rel="stylesheet">
    
    <!-- Make bootstrap available globally -->
    <script>
        // Make bootstrap available globally for dynamic modal initialization
        window.bootstrap = bootstrap;
    </script>
    
    <!-- Custom JavaScript -->
    <script src="scripts/main.js" type="module"></script>
</body>
</html>